(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[252],{19950:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return y},default:function(){return v}});var s=n(85893),a=n(65988),l=n(9008),o=(n(41664),n(25675),n(87428)),r=n(11163),i=n(67294),c=n(8126),d=n(21727),m=n(80018),u=n(96156),x=n(90044),j=n(85677),p=function(e){var t=(0,i.useState)(!0),n=(t[0],t[1],(0,i.useState)(!1)),a=n[0],l=n[1],o=(0,i.useState)(!1),c=o[0],d=o[1],m=(0,i.useState)(null),u=(m[0],m[1]),x=(0,i.useState)(null),p=x[0],b=x[1],h=(0,r.useRouter)(),f=e.admin,g=e.token,N=function(){return l(!a)};return(0,s.jsx)(i.Fragment,{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{type:"button",onClick:N,className:"btn btn-primary btn-room-edit",children:"Delete"}),(0,s.jsx)("div",{className:"delete-modal",children:(0,s.jsx)(j.Z,{isOpen:a,toggle:N,centered:!0,children:(0,s.jsx)("div",{className:"modal-dialog m-0",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("p",{className:"modal-title",id:"exampleModalLabel",children:"Confirm Action"}),(0,s.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:N})]}),(0,s.jsx)("div",{className:"modal-body pb-0",children:(0,s.jsxs)("p",{className:"admin-delete-text w-75 mx-auto mt-5 mb-0 text-center",children:["Are you sure you want to remove ",(0,s.jsxs)("b",{children:['"',f.profile?"".concat(f.profile.lastname," ").concat(f.profile.firstname):"None",'"']})," as an admin?"]})}),p?(0,s.jsx)("p",{className:"text-danger text-center",children:p}):"",(0,s.jsx)("div",{className:"w-50 mx-auto my-5 text-center",children:c?(0,s.jsx)("div",{class:"text-center",children:(0,s.jsx)("div",{className:"spinner-border",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{type:"button",className:"btn btn-primary btn-cancel-modal px-4  mx-1","data-bs-dismiss":"modal","aria-label":"Close",onClick:N,children:"Cancel"}),(0,s.jsx)("button",{type:"button",className:"btn btn-outline-dark px-4 mx-1",onClick:function(){return function(e){d(!0),console.log("this is the admin :",e),fetch("https://gtdo2np6f2.execute-api.us-east-1.amazonaws.com/dev"+"/admins/".concat(e._id),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+g},body:JSON.stringify({})}).then((function(e){return e.json()})).then((function(e){console.log(e),d(!1),e.error?(d(!1),b(e.message)):(u(e.message),h.reload(window.location.pathname))})).catch((function(e){d(!1),b(e.message)}))}(f)},children:"Delete"})]})})]})})})})]})})};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){var t=e.row,n=e.index,a=e.column,l=e.col,o=e.onChange,r=(0,i.useState)(t[a.selector]),c=r[0],d=r[1];return null!==a&&void 0!==a&&a.editing?(0,s.jsx)("input",{type:a.type||"text",name:a.selector,style:{width:"100%"},onChange:function(e){d(e.target.value),null===o||void 0===o||o(e)},value:c}):l.cell?l.cell(t,n,a):t[a.selector]},g=function(e){var t=(0,i.useState)(!0),n=(t[0],t[1],(0,i.useState)(null)),a=n[0],l=n[1],o=(0,i.useState)(!1),c=(o[0],o[1]),d=[{name:"Fullname",selector:"firstname",sortable:!0,cell:function(e){return(0,s.jsx)("p",{children:e.profile?"".concat(e.profile.firstname," ").concat(e.profile.lastname):"None"})}},{name:"Role",selector:"role",sortable:!0,editable:!0},{name:"Email Address",selector:"email",sortable:!0,editable:!0},{name:"CreatedAt",selector:"createdAt",sortable:!0},{name:"Delete Action",selector:"_id",cell:function(e){return(0,s.jsx)(p,{admin:e,token:O})}}],j=(0,r.useRouter)(),b=(0,i.useState)(e.admins),g=b[0],N=b[1],y=(0,i.useState)(""),v=y[0],w=y[1],C=(0,i.useRef)({}).current,k=function(e){return e._id===v},O=e.token,S=function(e){var t=e.target.name,n=e.target.value;C=h(h({},C),{},(0,u.Z)({},t,n))},_=function(){w("")},E=d.map((function(e){return e.editable?h(h({},e),{},{cell:function(t,n,a){var l=k(t);return(0,s.jsx)(f,{row:t,index:n,column:h(h({},a),{},{editing:l}),col:e,onChange:S})}}):e})),A=(0,i.useCallback)((function(){return[].concat((0,m.Z)(E),[{name:"Actions",allowOverflow:!0,minWidth:"200px",cell:function(e){return k(e)?(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{type:"button",onClick:function(){return function(e){var t=h(h({},e),C),n=(0,m.Z)(g),s=n.findIndex((function(e){return v===e._id}));if(s>-1){var a=n[s];n.splice(s,1,h(h({},a),t)),w(""),N(n),console.log("this is the temporary payload: ",t),fetch("http://127.0.0.1:5559"+"/admins/".concat(t._id),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+O},body:JSON.stringify({role:t.role})}).then((function(e){return e.json()})).then((function(e){console.log(e),c(!1),e.error?(c(!1),l(e.message)):(c(!1),j.reload(window.location.pathname))})).catch((function(e){c(!1),l(e.message)}))}}(e)},style:{backgroundColor:"lightgreen"},children:"save"}),(0,s.jsx)("button",{type:"button",onClick:_,style:{backgroundColor:"orangered"},children:"cancel"})]}):(0,s.jsx)("button",{type:"button",onClick:function(){w(e._id)},className:"btn btn-primary btn-room-edit",children:"Edit"})}}])}),[E]);return(0,s.jsxs)(i.Fragment,{children:[a?(0,s.jsx)("p",{className:"text-danger",children:a}):"",(0,s.jsx)(x.ZP,{title:"All Admins",columns:A(),data:g,selectableRows:!0,Clicked:!0,highlightOnHover:!0,striped:!0,onSelectedRowsChange:function(e){console.log("Selected Rows: ",e.selectedRows)},pagination:!0})]})},N=n(85789);c.Z.addLocale(d);new c.Z("en-US");var y=!0,v=function(e){var t=(0,i.useState)(!1),n=t[0],c=t[1],d=(0,i.useState)(null),m=d[0],u=d[1],x=(0,i.useState)(null),p=x[0],b=x[1],h=(0,i.useState)(!1),f=h[0],y=h[1],v=(0,r.useRouter)(),w=function(){return y(!f)},C=e.token,k=e.admins.data;return(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(l.default,{children:(0,s.jsx)("link",{href:"/css/sidebar.css",rel:"stylesheet",className:"jsx-4262498705"})}),(0,s.jsxs)("div",{className:"jsx-4262498705 row",children:[(0,s.jsx)("div",{className:"jsx-4262498705 col-md-2",children:(0,s.jsx)(N.Z,{})}),(0,s.jsx)("div",{className:"jsx-4262498705 col-md-10",children:(0,s.jsxs)("div",{className:"jsx-4262498705 admin-dashboard-content",children:[(0,s.jsxs)("div",{className:"jsx-4262498705 d-flex justify-content-between",children:[(0,s.jsx)("p",{className:"jsx-4262498705 admin-dashboard-content-header",children:"Administration"}),(0,s.jsxs)("p",{className:"jsx-4262498705",children:[(0,s.jsxs)("button",{type:"button",onClick:w,"data-bs-toggle":"modal","data-bs-target":"#exampleModal",className:"jsx-4262498705 btn btn-primary btn-add-room",children:[(0,s.jsx)("img",{src:"/img/PlusCircle.png",width:"20",className:"jsx-4262498705"})," ",(0,s.jsx)("span",{className:"jsx-4262498705 px-1",children:"Add Admin"}),"   "]}),(0,s.jsx)(j.Z,{isOpen:f,toggle:w,centered:!0,children:(0,s.jsx)("div",{className:"jsx-4262498705 modal-dialog m-0",children:(0,s.jsxs)("div",{className:"jsx-4262498705 modal-content",children:[(0,s.jsxs)("div",{className:"jsx-4262498705 modal-header",children:[(0,s.jsx)("p",{id:"exampleModalLabel",className:"jsx-4262498705 modal-title",children:"Add Admin"}),(0,s.jsx)("button",{type:"button","data-bs-dismiss":"modal","aria-label":"Close",onClick:w,className:"jsx-4262498705 btn-close"})]}),(0,s.jsx)("div",{className:"jsx-4262498705 modal-body",children:p?(0,s.jsx)("h3",{className:"jsx-4262498705 w-75 mx-auto",children:p}):(0,s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c(!0);var t={firstname:e.target.firstname.value,lastname:e.target.lastname.value,email:e.target.email.value,password:e.target.password.value};fetch("https://gtdo2np6f2.execute-api.us-east-1.amazonaws.com/dev/admins",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+C},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){console.log(e),c(!1),e.error?(c(!1),u(e.message)):(c(!1),b(e.message),v.reload(window.location.pathname))})).catch((function(e){c(!1),u(e.message)}))},className:"jsx-4262498705",children:[(0,s.jsxs)("div",{className:"jsx-4262498705 mb-3",children:[(0,s.jsx)("label",{for:"firstname",className:"jsx-4262498705 form-label login-form-label admin-form-title",children:"First Name"}),(0,s.jsx)("input",{type:"text",id:"firstname","aria-describedby":"phoneHelp",name:"firstname",className:"jsx-4262498705 form-control"})]}),(0,s.jsxs)("div",{className:"jsx-4262498705 mb-3",children:[(0,s.jsx)("label",{for:"lastname",className:"jsx-4262498705 form-label login-form-label admin-form-title",children:"Last Name"}),(0,s.jsx)("input",{type:"text",id:"lastname","aria-describedby":"phoneHelp",name:"lastname",className:"jsx-4262498705 form-control"})]}),(0,s.jsxs)("div",{className:"jsx-4262498705 mb-3",children:[(0,s.jsx)("label",{for:"email",className:"jsx-4262498705 form-label login-form-label admin-form-title",children:"Email Address"}),(0,s.jsx)("input",{type:"text",id:"email","aria-describedby":"phoneHelp",name:"email",className:"jsx-4262498705 form-control"})]}),(0,s.jsxs)("div",{className:"jsx-4262498705 mb-3",children:[(0,s.jsx)("label",{for:"password",className:"jsx-4262498705 form-label login-form-label admin-form-title",children:"Password"}),(0,s.jsx)("input",{type:"password",id:"password","aria-describedby":"phoneHelp",name:"password",className:"jsx-4262498705 form-control"})]}),m?(0,s.jsx)("p",{className:"jsx-4262498705 text-danger",children:m}):"",(0,s.jsx)("div",{className:"jsx-4262498705 mb-3 text-center",children:n?(0,s.jsx)("button",{type:"submit",disabled:!0,className:"jsx-4262498705 btn btn-primary btn-lg btn-register mt-4",children:"Loading..."}):(0,s.jsx)("button",{type:"submit",className:"jsx-4262498705 btn btn-primary btn-lg btn-register mt-4",children:"Continue"})})]})})]})})})]})]}),(0,s.jsx)(g,{admins:k,token:C})]})})]}),(0,s.jsx)(a.default,{id:"4262498705",children:[".modal-header.jsx-4262498705{background:#EEEEEE;border-radius:5px 5px 0px 0px;}",".modal-title.jsx-4262498705{font-family:Objektiv Mk2;font-style:normal;font-weight:bold;font-size:1rem;line-height:30px;color:#585858;}"]})]})}},56430:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/admins",function(){return n(19950)}])}},function(e){e.O(0,[1283,8180,2499,5677,4488,44,4480,9774,2888,179],(function(){return t=56430,e(e.s=t);var t}));var t=e.O();_N_E=t}]);